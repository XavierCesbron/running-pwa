<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Running PWA Calculator</title>

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#FC4C02" />

  <style>
    :root {
      --strava-orange: #FC4C02;
      --strava-light: #ff6628;
      --strava-dark: #cc3c02;
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding-bottom: 60px;
    }
    header {
      background: var(--strava-orange);
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .tab-bar {
      position: fixed;
      bottom: 0;
      width: 100%;
      display: flex;
      background: white;
      border-top: 1px solid #ccc;
      z-index: 10;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 12px 5px;
      font-size: 13px;
      cursor: pointer;
      color: #777;
    }
    .tab.active {
      color: var(--strava-orange);
      font-weight: bold;
      border-top: 3px solid var(--strava-orange);
      margin-top: -3px;
    }
    .page {
      display: none;
      padding: 20px;
      padding-bottom: 70px;
    }
    .page.active {
      display: block;
    }
    .input-group {
        background: white;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    }
    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #333;
        font-size: 14px;
    }
    input[type="number"], input[type="text"], select {
      width: 100%;
      padding: 10px;
      margin: 5px 0 15px 0;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box; 
    }
    button {
      padding: 12px;
      width: 100%;
      background: var(--strava-orange);
      border: none;
      color: white;
      font-size: 18px;
      border-radius: 4px;
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .result h3 { color: var(--strava-orange); margin-top: 0; }
    .radio-container { display: flex; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; overflow: hidden; }
    .radio-label { flex: 1; text-align: center; padding: 10px; background: #f9f9f9; cursor: pointer; font-size: 14px; }
    .radio-input:checked + .radio-label { background: var(--strava-orange); color: white; }
    .radio-input { display: none; }
    .hidden-fields { display: none; }
    .passages-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px; }
    .passages-table th, .passages-table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    .zone-item { margin-bottom: 15px; padding: 10px; border-radius: 6px; background: #fff; border-left: 5px solid; }
  </style>
</head>

<body>

<header>Running Calculator</header>

<!-- Onglets existants ici (page1, page2, page3) inchang√©s -->

<div id="page4" class="page">
  <h2>Zones de Travail</h2>
  <div class="input-group">
    <label>VMA (km/h)</label>
    <input id="vma" type="number" value="18" />
    <label>FCmax (bpm)</label>
    <input id="fcmax" type="number" placeholder="Ex: 190" />
    <button onclick="calculZones()">Calculer</button>
  </div>
  <div id="res3" class="result"></div>
</div>

<div class="tab-bar">
  <div class="tab active" onclick="switchTab(1)">üèÉ Course</div>
  <div class="tab" onclick="switchTab(2)">üßÆ Calcul</div>
  <div class="tab" onclick="switchTab(3)">‚è± S√©ance</div>
  <div class="tab" onclick="switchTab(4)">üìä Zones</div>
</div>

<script>
function secPerKmToAllure(sec) {
    if (sec <= 0) return "0:00";
    let m = Math.floor(sec / 60);
    let s = Math.floor(sec % 60).toString().padStart(2,"0");
    return m + ":" + s;
}

function calculZones() {
    let vma = parseFloat(document.getElementById("vma").value);
    let fc = parseFloat(document.getElementById("fcmax").value);
    if (!vma) return;

    const zones = [
        { name: "Allure mod√©r√©e / R√©cup√©ration", min: 50, max: 60, fmin: 60, fmax: 65, c: "#4CAF50" },
        { name: "Endurance fondamentale", min: 60, max: 70, fmin: 65, fmax: 75, c: "#8BC34A" },
        { name: "Endurance active / Tempo", min: 70, max: 75, fmin: 75, fmax: 85, c: "#FFC107" },
        { name: "Marathon", min: 75, max: 80, fmin: 80, fmax: 85, c: "#FF9800", d: 42.195 },
        { name: "Semi-marathon", min: 80, max: 85, fmin: 85, fmax: 90, c: "#FF5722", d: 21.097 },
        { name: "10km", min: 85, max: 90, fmin: 90, fmax: 93, c: "#F44336", d: 10 },
        { name: "5km", min: 90, max: 95, fmin: 93, fmax: 95, c: "#D32F2F", d: 5 }
    ];

    let output = "";
    zones.forEach(z => {
        let sMin = vma * z.min / 100, sMax = vma * z.max / 100;
        let aMin = 3600 / sMin, aMax = 3600 / sMax;
        output += `<div class="zone-item" style="border-left-color:${z.c}"><div class="zone-title">${z.name}</div>`;
        output += `<div class="zone-data"><p>Vitesse : <span>${sMin.toFixed(1)}-${sMax.toFixed(1)} km/h</span></p>`;
        // Temps maximal en premier
        if(z.d){ // uniquement pour marathon, semi, 10km, 5km
            let tMax = aMax * z.d;
            let tMin = aMin * z.d;
            output += `<p>Temps : <span>${secToTime(tMax)} - ${secToTime(tMin)}</span></p>`;
        } else {
            output += `<p>Allure : <span>${secPerKmToAllure(aMax)}-${secPerKmToAllure(aMin)} min/km</span></p>`;
        }
        if(fc) output += `<p>FC : <span>${Math.round(fc*z.fmin/100)}-${Math.round(fc*z.fmax/100)} bpm</span></p>`;
        output += `</div></div>`;
    });

    document.getElementById("res3").innerHTML = output;
}

function secToTime(sec){
    let h = Math.floor(sec/3600);
    let m = Math.floor((sec%3600)/60);
    let s = Math.floor(sec%60);
    if(h>0) return `${h}h ${m.toString().padStart(2,"0")}m ${s.toString().padStart(2,"0")}s`;
    return `${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
}
</script>
</body>
</html>
